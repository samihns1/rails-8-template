<!DOCTYPE html>
<html>
  <head>
    <title><%= content_for(:title) || "Basra Online" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <%# Enable PWA manifest for installable apps (make sure to enable in config/routes.rb too!) %>
    <%#= tag.link rel: "manifest", href: pwa_manifest_path(format: :json) %>

    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icon.png">

    <!-- The official Pico CSS stylesheet -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.conditional.css">

    <!-- The official Bootstrap utilities stylesheet -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/twbs/bootstrap@main/dist/css/bootstrap-utilities.css">

    <!-- Our modifications to default Pico CSS styles -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/firstdraft/pico.firstdraft.css@latest/pico.firstdraft.css">

    <%# Includes all stylesheet files in app/assets/stylesheets %>
    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <link rel="stylesheet" href="/css/my_styles.css">
  </head>

<body class="pico">
  <style>
    .site-header {
      background:#ffffff;
      color:#000000;
      box-shadow:0 2px 10px rgba(0,0,0,0.08);
    }

    .site-header-inner {
      max-width:960px;
      margin:0 auto;
      padding:0.75rem 1.5rem;
      display:flex;
      align-items:center;
      justify-content:space-between;
    }

    .brand-link {
      display:flex;
      align-items:center;
      gap:0.4rem;
      text-decoration:none;
      color:#000000;
      font-weight:700;
      font-size:1.15rem;
    }

    .brand-link:hover {
      color:#6b7280;
    }

    .main-nav ul {
      display:flex;
      align-items:center;
      gap:1.25rem;
      margin:0;
      padding:0;
      list-style:none;
    }

    .main-nav a {
      text-decoration:none;
      font-size:0.95rem;
      color:#000000;
      transition:color 0.15s ease;
    }

    .main-nav a:hover {
      color:#6b7280;
    }

    .nav-auth a {
      padding:0.35rem 0.85rem;
      border-radius:999px;
      border:1px solid #d1d5db;
      font-size:0.9rem;
      color:#000000;
    }

    .nav-auth a:hover {
      color:#6b7280;
      border-color:#9ca3af;
    }

    main .container-two-thirds {
      max-width:960px;
      margin:2rem auto 3rem;
      padding:0 1.5rem;
    }

    .flash {
      padding:0.6rem 0.9rem;
      border-radius:8px;
      font-size:0.9rem;
      margin-bottom:0.5rem;
    }

    .flash-success {
      background:#dcfce7;
      color:#166534;
      border:1px solid #bbf7d0;
    }

    .flash-danger {
      background:#fee2e2;
      color:#b91c1c;
      border:1px solid #fecaca;
    }

    .site-footer {
      padding:1.25rem 0 1.75rem;
      font-size:0.85rem;
      color:#6b7280;
      text-align:center;
      border-top:1px solid #e5e7eb;
      background:#f9fafb;
    }
  </style>

  <header class="site-header">
    <div class="site-header-inner">
      <a href="/" class="brand-link">
        Basra
      </a>

      <nav class="main-nav">
        <ul>
          <li><a href="/rules">Rules</a></li>

          <% if current_user.nil? %>
            <li class="nav-auth">
              <a href="/users/sign_in">Sign in</a>
            </li>
            <li class="nav-auth">
              <a href="/users/sign_up">Sign up</a>
            </li>
          <% else %>
            <li><a href="/users/edit">Edit profile</a></li>
            <li class="nav-auth">
              <a href="/users/sign_out">Sign out</a>
            </li>
          <% end %>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <div class="container-two-thirds">
      <% if notice.present? %>
        <div class="flash flash-success"><%= notice %></div>
      <% end %>

      <% if alert.present? %>
        <div class="flash flash-danger"><%= alert %></div>
      <% end %>

      <%= yield %>
    </div>
  </main>

  <footer class="site-footer">
    Samih Sawiris 2025. All rights reserved.
  </footer>
</body>
</html>
