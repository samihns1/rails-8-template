<style>
  .home-btn {
    display:inline-block;
    padding:0.6rem 1.2rem;
    border-radius:8px;
    text-decoration:none;
    font-weight:600;
    text-align:center;
    width:200px;
    box-shadow:0 3px 10px rgba(0,0,0,0.12);
    transition: background-color 0.2s ease, transform 0.1s ease, filter 0.2s ease;
  }

  .home-btn:hover {
    filter: brightness(85%);
    transform: translateY(-2px);
  }

  .btn-blue { background:#3b82f6; color:white; }
  .btn-green { background:#10b981; color:white; }
  .btn-grey { background:#e5e7eb; color:#374151; box-shadow:0 3px 10px rgba(0,0,0,0.08); }

  .alert-banner {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: #fee2e2;
    color: #991b1b;
    padding: 0.75rem 1.25rem;
    border-radius: 8px;
    border: 2px solid #fca5a5;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    font-weight: 600;
    font-size: 0.95rem;
    z-index: 1000;
    max-width: 400px;
    text-align: center;
    animation: slideDown 0.3s ease-out;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateX(-50%) translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
  }

  .alert-banner.fade-out {
    animation: fadeOut 0.3s ease-out forwards;
  }

  @keyframes fadeOut {
    to {
      opacity: 0;
      transform: translateX(-50%) translateY(-20px);
    }
  }
</style>

<div id="game-deleted-alert" style="display: none;" class="alert-banner"></div>

<div style="text-align:center; margin-top:1rem; margin-bottom:2.5rem;">

  <h1 style="
    font-size:2.3rem;
    margin-bottom:0.5rem;
    font-weight:700;
    color:#1f2937;
  ">
    Welcome to Basra
  </h1>

  <p style="
    font-size:1rem;
    color:#6b7280;
    margin-bottom:1.5rem;
  ">
    Create a game, invite your friends, and start playing.
  </p>

  <div style="
    display:flex;
    justify-content:center;
    gap:1rem;
    margin-bottom:1rem;
  ">
    <a href="/games" class="home-btn btn-blue">
      Create a Game
    </a>

    <a href="/join" class="home-btn btn-green">
      Join a Game
    </a>
  </div>

  <div>
    <a href="/rules" class="home-btn btn-grey">
      Learn the Rules
    </a>
  </div>

</div>

<% if current_user != nil %>
<article style="margin-top: 2rem; display: flex; justify-content: center;">
  <div style="
    width: 100%;
    max-width: 720px;
    background: #ffffff;
    border-radius: 12px;
    padding: 16px 20px 20px;
    box-shadow: 0 10px 24px rgba(15, 23, 42, 0.10);
  ">
    <div style="display:flex; align-items:baseline; justify-content:space-between; margin-bottom: 8px;">
      <h2 style="margin:0; font-size:1.4rem;">Leaderboard</h2>
    </div>

    <% leaderboard = User.leaderboard %>
    <% if leaderboard.any? %>
      <table style="border-collapse: collapse; width: 100%; font-size:0.95rem;">
        <thead>
          <tr>
            <th style="text-align:left; padding:6px 8px; border-bottom:1px solid #e5e7eb; color:#6b7280; font-weight:500;">
              Player
            </th>
            <th style="text-align:right; padding:6px 8px; border-bottom:1px solid #e5e7eb; color:#6b7280; font-weight:500;">
              W
            </th>
            <th style="text-align:right; padding:6px 8px; border-bottom:1px solid #e5e7eb; color:#6b7280; font-weight:500;">
              L
            </th>
          </tr>
        </thead>
        <tbody>
          <% leaderboard.each_with_index do |row, index| %>
            <tr style="<%= 'background:#f9fafb;' if index.odd? %>">
              <td style="padding:6px 8px; border-bottom:1px solid #f3f4f6;">
                <%= row[:user].username || row[:user].email %>
              </td>
              <td style="padding:6px 8px; border-bottom:1px solid #f3f4f6; text-align:right;">
                <%= row[:wins] %>
              </td>
              <td style="padding:6px 8px; border-bottom:1px solid #f3f4f6; text-align:right;">
                <%= row[:losses] %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <div style="padding:8px 2px; color:#6b7280; font-size:0.9rem;">
        No records yet. Play some games to get on the leaderboard
      </div>
    <% end %>
  </div>
</article>
<% end %>

<script>
  (function() {
    const alertMessage = localStorage.getItem('gameDeletedAlert');
    const wasCreator = localStorage.getItem('gameDeletedWasCreator');
    
    console.log('Alert check:', { alertMessage, wasCreator });
    
    if (alertMessage) {
      const alertDiv = document.getElementById('game-deleted-alert');
      
      if (alertDiv) {
        alertDiv.textContent = alertMessage;
        alertDiv.style.display = 'block';
        
        console.log('Alert displayed');
        
        localStorage.removeItem('gameDeletedAlert');
        localStorage.removeItem('gameDeletedWasCreator');
        
        setTimeout(() => {
          alertDiv.classList.add('fade-out');
          
          setTimeout(() => {
            alertDiv.style.display = 'none';
            alertDiv.classList.remove('fade-out');
            console.log('Alert hidden');
          }, 300);
        }, 5000);
      } else {
        console.error('Alert div not found!');
      }
    }
  })();
</script>
